Miglioriamo EpiBooks!

Riparti dal progetto precedente, oggi aggiungeremo le seguenti nuove funzionalitÃ .

Oggi devi modificare il layout dellâ€™applicazione: crea due colonne, quella di sinistra continuerÃ  a mostrare le copertine del libri, mentre quella sulla destra mostrerÃ  SEMPRE un componente CommentArea. Infine rimuovi lâ€™altra istanza di CommentArea, quella presente allâ€™interno di SingleBook.
Ora, al caricamento dellâ€™applicazione, CommentArea non riceverÃ  piÃ¹ immediatamente un libro per effettuare la fetch delle recensioni; tienine conto e fai in modo che CommentArea non provochi un crash dellâ€™intera applicazione quando ancora non possiede dati da mostrare.
Ora che la proprietÃ  â€˜selectedâ€™ Ã¨ memorizzata allâ€™interno del componente BookList, questo valore deve raggiungere anche CommentArea allâ€™interno di una prop: quando â€˜selectedâ€™ cambia (ovvero quando lâ€™utente clicca su un nuovo libro) CommentArea deve eseguire una nuova fetch con il nuovo valore di â€˜selectedâ€™, e le recensioni nella colonna di destra devono riflettere il libro selezionato nella colonna di sinistra. Puoi ottenere questo risultato inserendo un componentDidUpdate() allâ€™interno di CommentArea, e impostandolo in ascolto delle modifiche sulla prop â€˜selectedâ€™.
Quanto la sezione delle recensioni Ã¨ di nuovo funzionante, controlla che anche il componente AddComment non abbia problemi. A seconda della tua implementazione, potrebbe richiedere una riscrittura in modo da mantenere aggiornata la sua proprietÃ  elementId (necessaria per la richiesta POST) con il libro attualmente selezionato.

EXTRA

Se non hai ancora avuto modo di farlo, lavora sullâ€™esperienza utente con indicatori di caricamento e messaggi dâ€™errore.

ğŸ“š API Docs:

Il tuo endpoint per tutto il CRUD si trova su:

https://striveschool-api.herokuapp.com/api/comments/

CiÃ² significa che puoi effettuare operazioni di GET, DELETE, POST e PUT.

ğŸ›‘ IMPORTANT ğŸ›‘
Per utilizzare lâ€™endpoint avrai bisogno di un header di autenticazione. Puoi ottenerne uno su https://strive.school/studentlogin

Una recensione Ã¨ strutturata nel seguente modo:

{
â€œcommentâ€: string
â€œrateâ€: string,
â€œelementIdâ€: string
}

Dove:

comment Ã¨ il testo della recensione
rate Ã¨ un valore compreso tra 1 e 5
elementId Ã¨ lâ€™identificativo ASIN del libro

Esempio:

{
â€œcommentâ€: â€œUn buon libro, anche se la trama non mi ha convinto fino in fondoâ€
â€œrateâ€: â€œ3â€,
â€œelementIdâ€: â€œ0316438960â€
}

âš ï¸ ATTENZIONE âš ï¸

Facendo unâ€™operazione di GET su https://striveschool-api.herokuapp.com/api/comments/ riceverai TUTTE le recensioni presenti nel database. Probabilmente quello che a te interessa maggiormente sono le recensioni relative ad un singolo libro: puoi ottenerli aggiungendo lâ€™ASIN del libro sul tuo endpoint:
https://striveschool-api.herokuapp.com/api/comments/:elementId

Esempio:

Una GET su https://striveschool-api.herokuapp.com/api/comments/0316438960 ti restituirÃ  tutte le recensioni appartenenti ad un singolo libro.